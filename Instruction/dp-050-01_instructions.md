---
lab:
    title: 'ラボ 1 - Azure アーキテクチャに関する考慮事項'
    module: 'モジュール 1: データプラットフォームのモダナイゼイションの概要'
---

# DP-050 - SQL-Workloads から Azure への移行
# ラボ 1 - Azure アーキテクチャに関する考慮事項

**予想時間**：50 分

**前提条件**：この演習を実行するための前提条件の手順はありません。

**ラボ ファイル**：このラボのファイル _Allfiles\Labfiles\Starter\DP-150.1_ フォルダにあります。 

## ラボの概要

受講者は、Data Platform のモダナイゼイション、および、モダナイゼイション プロジェクトを高いレベルで組織が実施する理由とその方法について理解したことを、このモジュールで得た情報を使用して実際に説明します。Azure への移行のコストを決定する方法を実際に説明します。また、作業中の環境に関する情報も収集します。受講者は、特定のシナリオに使用する必要があるデータ プラットフォームのモダナイゼイション戦略を最終的に決定します。

## ラボの目的
  
このラボを終了すると、次ができるようになります。

1. データ プラットフォームのモダナイゼイションについて
2. 移行ステージを理解する
3. Data Migration Technologies

## シナリオ
  
最近、あなたは、AdventureWorks 社の上級データ エンジニアとして採用され、コンサルタントおよびアーキテクトと協力して、組織の技術要件およびビジネス要件を満たすデータ プラットフォームのモダナイゼイション プロジェクトを開始しています。Azure への移行の総所有コストを計算する方法の例を実際に説明します。次に、ジュニア データ エンジニアに、Azure に移行する SQL Server に関する情報を収集してもらいます。次に、所定のシナリオに対して、所定のシナリオに移行するための最適な Azure Data Platform テクノロジをアドバイスします。

このラボの最後には、次ができるようになります。

1. データ プラットフォームのモダナイゼイションについて
2. 移行ステージを理解する
3. Data Migration Technologies

## 演習 1：データ プラットフォームのモダナイゼイションについて

この演習で、データベースのコストを計算する方法を実際に説明する

予想時間：15 分

この演習の主なタスクは、次のとおりです。

1. マイクロソフトの総保有コスト（TCO）計算機を開く
1. サーバー ベースのワークロードの定義
1. ストレージの追加
1. ネットワークの追加
1. 通貨の調整
1. 電気代の調整
1. その他の前提条件の調整
1. オンプレミスと Azure コストの比較

### タスク 1：総保有コスト（TCO）計算機を開く

1. ブラウザを開く
1. [Azure TCO Calculator](https://azure.microsoft.com/en-us/pricing/tco/calculator/)に
1. [Define workloads] から移動して、 **Servers** セクションにワークロードがないことを確認する

### タスク 2：データベース ワークロードの入力をする

1. **Databases** ワークロードセクションで、 **+ Add database** ハイパーリングをクリックします。
1. ワークロード **Accounting** に名前を付ける
1. **Source** の下に次の値を入力する
   - データベース **Microsoft SQL Server**
   - ライセンス **Enterprise**
   - 環境 **Physical Servers**
   - オペレーティングシステム **Windows**
   - サーバー **1**
   - **1** サーバーあたりのプロク
   - コア/プロク **4**
   - RAM (GB) **64**
   - **CPU** による最適化
   - SQL Server 2008/2008R2 **True**
1. **宛先** の下にある次の場所に入力する
   - サービス **SQL Server VM**
   - ディスクの種類 **SSD**

    > これは、Azure の運用サーバーに対する推奨です
   - IOPS **5000**
   - SQL Server ストレージ **32 GB**
   - SQL Server バックアップ **32 GB**

### タスク 3：ストレージ ワークロードの入力をする

1. **Storage** ワークロードセクションで
2. **Accounting Local Disks** に名前を付ける
   - ストレージの種類 **Local Disk/SAN**
   - ディスクの種類 **HDD**
   - キャパシティ **3TB**
   - Backup **1TB**
   - アーカイブ **0TB**

### タスク 4：ネットワーク ワークロードの入力をする

1. **Networking** ワークロードのセクションで
   - アウトバウンド帯域幅は **Leave as default** を選択


1. Web ページを下にスクロール **Next** と表示されたの青いボタンをクリックする

### タスク 5：通貨の調整

1. **Adjust assumptions** セクションで、通貨が自国通貨に設定されていることを確認する

### タスク 6：ソフトウェアの保証

1. **Software Assurance coverage (provides Azure Hybrid Benefit)** セクションで
   - Windows Server Software Assurance のカバレッジ **True** を選択
   - SQL Server Software Assurance のカバレッジ **True** を選択
   - リンクをクリックして、コンテンツを調査する

### タスク 7：Geo（地理）冗長ストレージ(GRS)：

1. **Geo-redundant storage (GRS)** セクションで
   - GRS は、プライマリ リージョンから数百マイル離れたセカンダリ リージョンにデータをレプリケートします。**デフォルトのままにする**
   - リンクをクリックして、コンテンツを調査する

### タスク 8：仮想マシンのコスト

1. **Virtual Machine costs** セクションで
   - 電卓でこれを有効にすると、B シリーズ仮想マシンがが推奨されなくなるので、 **Leave as default** のままにすること
   - リンクをクリックして、コンテンツを調査する

### タスク 9：電力コスト

1. **Geo-redundant storage (GRS)** セクションで
   - kw 時間あたりの価格、 **既知の場合は現実的な値を入力**

     > **注** 2018 年の電気の世界的な価格は、2018 年 [Global electricity prices in 2018](https://www.statista.com/statistics/263492/electricity-prices-in-selected-countries/)で見つけることができます。 これらの価格は米ドル($)で、お客様の自国通貨への変換が必要

### タスク 10：ストレージ コスト

1. **Storage costs** セクションで
    - ローカル ディスク/SAN-SSD のストレージ調達コスト/GB は、 **Leave as default** を選択
    - ローカル ディスク/SAN-HDD のストレージ調達コスト/GB は、 **Leave as default** を選択
    - NAS/ファイル ストレージのストレージ調達コスト/GB は、 **Leave as default** を選択
    - BLOB ストレージのストレージ調達コスト/GB は、 **Leave as default** を選択
    - 年間エンタープライズ ストレージ ソフトウェアのサポート コストは、 **Leave as default** を選択
    - テープ ドライブあたりのコストは、 **Leave as default** を選択

### タスク 11：IT 人材コスト

1. **IT labor costs** セクションで
    - 専任管理者が管理できる物理サーバーの数は、 **Leave as default** を選択
    - フルタイムの管理者が管理できる仮想マシンの数は、 **Leave as default** を選択
    - IT 管理者の時間レートは、 **Leave as default** を選択

### タスク 12：その他の前提条件

1. **Other assumption** セクションで
   - 各セクションを展開し、関連するコストを確認

### タスク 13：報告書(1年)

1. **Next** をクリックする
1. 上部(「レポートの表示」の下)で、タイムフレームが、デフォルトで5年に設定されていることに注意すること
1. レポートまでスクロールし、オンプレミスと Azure のコストの見積もり内訳を調査する
1. オンプレミスの支出の大半はどこにありますか?
1. 最大のコスト削減がどこにあるかを調査する
1. 各セクションを順番に展開し、コストの内訳を調査する

### タスク 14：報告書(3年)

1. ページの先頭まで上にスクロールする
1. [レポートの表示] の下
   - 時間枠 **3** 年
1. レポートまでスクロールし、オンプレミスと Azure のコストの見積もり内訳を調査する
1. 5年間の合計支出はいくらですか?
1. オンプレミスの支出の大半はどこにありますか?
1. 各セクションを順番に展開し、コストの内訳を調査する

> **結果**：この演習を完了した後、Azure TCO 計算機を使用して、Adatum Corporation の会計サーバーとその関連データベースのオンプレミス展開とAzure 展開のコストの違いを特定しました。

## 演習 2：移行ステージを理解する
  
この演習では、使用しているサーバーの検出を実行して、マシンの仕様を理解します。

予想時間：15 分
  
この演習の主なタスクは、次のとおりです。

1. 使用されているメモリの量を決定する 
1. システムで使用されてる CPU を決定する
1. サーバー上のディスク構成を決定する

### タスク 1：サーバーで使用されているメモリの量を決定します。

1. 選択方法を選んで、サーバーで使用されているメモリの量を決定します。 

> **ヒント**：システム情報ツールを使用してこの情報をキャプチャする

1. メモ帳に値をメモしてください。

### タスク 2：サーバーで使用されている CPU の量を決定します。

1. 選択方法を選んで、サーバーで使用されているメモリの量を決定します。

1. メモ帳に値をメモしてください。

### タスク 3：サーバーで使用されているディスク構成を決定します。

1. 選択方法を選んで、サーバーで使用されているメモリの量を決定します。

1. メモ帳に値をメモしてください。

1. メモ帳を _Allfiles\Labfiles\Starter\DP-150.1_ フォルダに保存し、ServerSpecs.txt という名前を付けます。

> **結果**：この演習を完了した後、サーバーのハードウェア仕様に関する情報を収集したことになります。

## 演習 3：Data Migration Technologies

この演習では、お客様がオンプレミスの SQL Server から Azure に移行するのに役立つデータプラットフォームテクノロジーを選択します。 

予想時間：15 分 

この演習の主なタスクは、次のとおりです。

1. シナリオ A の移行を容易にするために必要なデータベース テクノロジを特定します。
1. シナリオ B での移行を容易にするために必要なデータベース テクノロジを特定します。

### タスク 1：シナリオ A の移行を容易にするために必要なデータベース テクノロジを特定します。

1. 次のシナリオを読む

    お客様は、現在 Microsoft SQL Server 2008 のオンプレミス バージョンに存在する多くのデータベースを使用するアプリケーションを持っています。データベースの総フットプリントは大きく、年間数テラバイトずつ急増しています。データベースが配置されている既存の SAN ストレージは、ほぼ容量が一杯となっていて、拡張するにはコストがかかり、寿命の終わりが近づいています。アプリケーションは、中程度のトランザクション率で、会社にとって重要であり、ダウンタイムはビジネスに重大な影響を与えます。アプリケーションの可用性を最大限に高めるために変更を加えるには、小さなメンテナンス ウィンドウを使用できます。高い成長率により、DBAとシステム管理者がすべてを実行し続けるために費やす時間がますます増えています。

1. このシナリオから、どのデータベース プラットフォーム テクノロジが適切でしょうか？

### タスク 2：シナリオ B での移行を容易にするために必要なデータベース テクノロジを特定します。

1. 次のシナリオを読む

    この例のお客様には、部門のニーズを満たすデータベースを格納する SQL Server があります。データベースをホストしているサーバーは、16 GB のメモリ搭載のクアッド コア サーバーであり、スプレッドシートと Access フォームの単純なデータ アクセスのバックエンドとして使用されています。合計で 350 MB を占めるデータベースは合計 6 個あります。このサーバーへの最大同時接続数は 12 です。

1. このシナリオから、どのデータベース プラットフォーム テクノロジが適切でしょうか？

> **結果**：この演習を完了した後、ベースに移行する適切なデータベース テクノロジを特定したことになります。

## ラボ レビュー

約 45 分後、インストラクターがこのラボを終了します。クラスで、各グループの調査結果について話し合います。

